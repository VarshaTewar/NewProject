<div class="sidebar w-64 flex-shrink-0 hidden md:flex flex-col">
    <div class="flex items-center justify-center h-16 px-4 border-b border-gray-700">
        <i class="fas fa-heartbeat text-3xl text-blue-400 mr-2"></i>
        <span class="text-xl font-bold text-white">Hospital Harmony</span>
    </div>
    <nav class="flex-1 px-2 py-4 space-y-1 overflow-y-auto">
        {% if 'dashboard' in user_permissions %}
        <a href="/" class="sidebar-link flex items-center px-4 py-3 text-sm font-medium text-gray-300 rounded-md hover:text-white {% if request.path == '/' %}active{% endif %}">
            <i class="fas fa-th-large mr-3 text-lg"></i>
            Dashboard
        </a>
        {% endif %}
        
        {% if 'patients' in user_permissions %}
        <a href="/patients" class="sidebar-link flex items-center px-4 py-3 text-sm font-medium text-gray-300 rounded-md hover:text-white {% if '/patients' in request.path %}active{% endif %}">
            <i class="fas fa-users mr-3 text-lg"></i>
            Patients
        </a>
        {% endif %}
        
        {% if 'beds' in user_permissions %}
        <a href="/beds" class="sidebar-link flex items-center px-4 py-3 text-sm font-medium text-gray-300 rounded-md hover:text-white {% if '/beds' in request.path %}active{% endif %}">
            <i class="fas fa-bed mr-3 text-lg"></i>
            Beds
        </a>
        {% endif %}
        
        {% if 'staff' in user_permissions %}
        <a href="/staff" class="sidebar-link flex items-center px-4 py-3 text-sm font-medium text-gray-300 rounded-md hover:text-white {% if '/staff' in request.path %}active{% endif %}">
            <i class="fas fa-user-md mr-3 text-lg"></i>
            Staff
        </a>
        {% endif %}
        
        {% if 'inventory' in user_permissions %}
        <a href="/inventory" class="sidebar-link flex items-center px-4 py-3 text-sm font-medium text-gray-300 rounded-md hover:text-white {% if '/inventory' in request.path %}active{% endif %}">
            <i class="fas fa-boxes mr-3 text-lg"></i>
            Inventory
        </a>
        {% endif %}
        
        {% if 'export' in user_permissions %}
        <a href="/export/patients" class="sidebar-link flex items-center px-4 py-3 text-sm font-medium text-gray-300 rounded-md hover:text-white">
            <i class="fas fa-file-export mr-3 text-lg"></i>
            Export Data
        </a>
        {% endif %}
        
        {% if 'manage_users' in user_permissions %}
        <div class="mt-4 pt-4 border-t border-gray-700">
            <p class="px-4 text-xs font-semibold text-gray-400 uppercase tracking-wider mb-2">
                Administration
            </p>
            <a href="/users" class="sidebar-link flex items-center px-4 py-3 text-sm font-medium text-gray-300 rounded-md hover:text-white {% if '/users' in request.path %}active{% endif %}">
                <i class="fas fa-users-cog mr-3 text-lg"></i>
                Manage Users
            </a>
        </div>
        {% endif %}
    </nav>
    <div class="p-4 border-t border-gray-700">
        <div class="flex items-center">
            <div class="w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white font-bold">
                {% set name_parts = user_name.split() if user_name else ['U'] %}
                {% if name_parts|length >= 2 %}
                    {{ name_parts[0][0] }}{{ name_parts[1][0] }}
                {% else %}
                    {{ user_name[0] if user_name else 'U' }}
                {% endif %}
            </div>
            <div class="ml-3 flex-1">
                <p class="text-sm font-medium text-white">{{ user_name }}</p>
                <p class="text-xs text-gray-400 capitalize">{{ user_role }}</p>
            </div>
        </div>
    </div>
</div>